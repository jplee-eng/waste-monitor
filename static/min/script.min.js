function updateUI(reading){const levelClass=reading.level>80?"error":reading.level>60?"warning":"good";document.getElementById("levelValue").innerHTML=`<span class="status ${ levelClass }">${reading.level }%</span>`;const batteryClass=reading.battery>3.3?"good":reading.battery>3.0?"warning":"error";document.getElementById("batteryValue").innerHTML=`<span class="status ${ batteryClass }">${reading.battery.toFixed(2)}v</span>`;const signalClass=reading.rssi>=-85?"good":reading.rssi>=-95?"good":reading.rssi>=-105?"warning":"error";const signalStatus=reading.rssi>=-85?"Excellent":reading.rssi>=-95?"Good":reading.rssi>=-105?"Fair":"Poor";document.getElementById("signalValue").innerHTML=`<span class="status ${ signalClass }">${ signalStatus }</span>`;const time=new Date(reading.timestamp).toLocaleTimeString("en-US",{hour12:false,hour:"2-digit",minute:"2-digit"});document.getElementById("status").innerHTML=`<span class="status updated">${ time }</span>`}const evtSource=new EventSource("/events");evtSource.onmessage=(event)=>{const reading=JSON.parse(event.data);updateUI(reading)};evtSource.onerror=()=>{document.getElementById("status").innerHTML='<span class="status error">Connection lost. Reconnecting...</span>'};