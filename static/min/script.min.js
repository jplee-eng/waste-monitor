function updateUI(e){document.getElementById("levelValue").textContent=e.level,document.getElementById("batteryValue").textContent=e.battery.toFixed(2);const t=e.rssi;let n,o;t>=-85?(n="Excellent",o="good"):t>=-95?(n="Good",o="good"):t>=-105?(n="Fair",o="warning"):(n="Poor",o="error"),document.getElementById("signalValue").innerHTML=`<span class="status ${o}">${n}</span>`;let a=e.battery>3.3?"good":e.battery>3?"warning":"error";document.getElementById("batteryValue").className=`metric status ${a}`,document.getElementById("lastUpdate").textContent=`Last updated: ${(new Date).toLocaleTimeString()}`;const s=`<p>RSSI: ${e.rssi} dBm</p><p>Last Reading: ${new Date(e.timestamp).toLocaleString()}</p>`;document.getElementById("status").innerHTML=s}const evtSource=new EventSource("/events");evtSource.onmessage=(e=>{const t=JSON.parse(e.data);updateUI(t)}),evtSource.onerror=(()=>{document.getElementById("status").innerHTML='<p class="status error">Connection lost. Reconnecting...</p>'});